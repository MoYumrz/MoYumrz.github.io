import{d as z,ad as R,w as V,f as j,e as A,r as f,ae as D,af as F,c,a as r,i as n,j as d,l as i,N as k,O as C,u as H,b as O,I as Z,o as l,k as y,m as G,t as E,B as J,E as v,H as K,Z as Q,s as U,v as W,$ as X,_ as Y}from"./index-DM1-aU-Q.js";/* empty css                 */import{l as ee}from"./index-Osy8pI4j.js";import{l as te,r as se,a as ae}from"./index-SeYphIJa.js";const oe={class:"category"},ne={class:"container"},le={class:"nav"},ce={key:0,class:"category-list"},re=["onClick"],de={class:"cover"},ie={class:"name"},ue={class:"prefer"},_e={key:1,class:"nodata"},pe=z({__name:"index",setup(ye){const N=H(),S=R(),o=O();V(()=>o.query.types,(t,e)=>{t==="preference"?g():_(t==="0"?null:Number(t))});const B=(t,e)=>{console.log(t,e)};j(()=>{L(),o.query.types==="preference"?g():o.query.types==="0"||o.query.types===void 0?_(null):_(Number(o.query.types)),A().authentication!=null&&m()});const u=f(),_=t=>{D(t).then(e=>{let s=e.data.data;u.value=s})},g=()=>{F().then(t=>{let e=t.data.data;u.value=e})},h=f(),L=()=>{ee().then(t=>{let e=t.data.data;h.value=e})},p=f(),m=()=>{te().then(t=>{let e=t.data.data;p.value=e.map(s=>s.categoryId),console.log(p.value)})},P=(t,e)=>{t?se(e).then(s=>{s.data.code===200?(v.success("移除偏好成功"),m()):v.error(s.data.msg)}):ae(e).then(s=>{s.data.code===200&&(v.success("添加偏好成功"),m())})};return(t,e)=>{const s=K,q=Z,b=Q,M=U,T=W,$=X;return l(),c("div",oe,[r("div",ne,[r("div",le,[n(q,{"default-active":i(o).fullPath=="/category"?"/category?types=0":i(o).fullPath,class:"el-menu-demo",mode:"horizontal",ellipsis:!1,router:"",onSelect:B},{default:d(()=>[n(s,{index:"/category?types=0"},{default:d(()=>e[0]||(e[0]=[y("全部分类")])),_:1}),(l(!0),c(k,null,C(h.value,a=>(l(),G(s,{index:"/category?types="+String(a.typesId),key:a.typesId},{default:d(()=>[y(E(a.typesName),1)]),_:2},1032,["index"]))),128)),n(s,{index:"/category?types=preference"},{default:d(()=>e[1]||(e[1]=[y("我的偏好")])),_:1})]),_:1},8,["default-active"])]),u.value!=null?(l(),c("div",ce,[(l(!0),c(k,null,C(u.value,a=>{var x;return l(),c("div",{key:a.categoryId,class:"category-item"},[r("div",{onClick:w=>(i(S).setCategory(a.categoryId,a.categoryName),i(N).push({path:"/"}))},[r("div",de,[n(b,{style:{width:"80px",height:"80px"},src:a.categoryIcon,fit:"cover"},null,8,["src"])]),r("div",ie,[n(M,{truncated:""},{default:d(()=>[y(E(a.categoryName),1)]),_:2},1024)])],8,re),r("div",ue,[n(T,{size:"small",icon:i(J),circle:"",type:(x=p.value)!=null&&x.includes(a.categoryId)?"primary":"default",onClick:w=>{var I;return P((I=p.value)==null?void 0:I.includes(a.categoryId),a.categoryId)}},null,8,["icon","type","onClick"])])])}),128))])):(l(),c("div",_e,[n($,{description:"没有偏好的分区"})]))])])}}}),he=Y(pe,[["__scopeId","data-v-aed81656"]]);export{he as default};
