import{d as $,u as j,f as F,r as f,K as L,as as P,o as l,c as r,a as t,i as e,j as n,k as i,M as Q,N,O as z,l as E,t as u,m as T,G as h,Q as O,R as W,s as Y,q,V as A,Z as G,x as J,$ as K,a0 as U,_ as D,at as Z,au as X}from"./index-DM1-aU-Q.js";import"./el-infinite-scroll-l0sNRNKZ.js";/* empty css                 */const ee={class:"follow-list"},te={class:"title"},se=["infinite-scroll-disabled"],ae={class:"item"},ne={class:"top"},oe=["onClick"],le={class:"user-avatar"},ie={class:"time"},ce=["onClick"],re={class:"tag-title"},de={class:"content"},ue={key:0,class:"covers"},_e={class:"bottom"},me={style:{"margin-right":"5px"}},ve={class:"comment-like"},fe={class:"comment"},pe={class:"like"},ge={key:0,class:"loading",style:{display:"flex","justify-content":"center",height:"50px"}},he={key:1,class:"no-more-data",style:{display:"flex","justify-content":"center",height:"50px"}},ye=$({__name:"PostList",setup(M){const p=j();F(()=>{k()});const _=f(!1),y=L(()=>v.value.current*v.value.pageSize>=x.value),S=L(()=>_.value||y.value),b=()=>{_.value=!0,v.value.current++,k(),_.value=!1},m=f([]),x=f(0),v=f({current:1,pageSize:10}),k=async()=>{try{const c=await P(v.value);m.value=m.value.concat(c.data.data.records),x.value=c.data.data.total}catch(c){console.error(c)}},H=c=>{const o=new Date(c),a=new Date,d=a.getTime()-o.getTime();return d<6e4?"刚刚":d<36e5?Math.floor(d/6e4)+"分钟前":d<864e5?Math.floor(d/36e5)+"小时前":d<1728e5?"昨天 ":a.getFullYear()===o.getFullYear()?o.toLocaleDateString("zh-CN",{month:"2-digit",day:"2-digit"}).replace(/\//g,"-").replace("，",""):o.toLocaleDateString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit"}).replace(/\//g,"-")},V=c=>c.replace(/<img[^>]*>/g,"[图片]").replace(/<[^>]*>/g,"");return(c,o)=>{const a=Y,d=q,C=A,w=G,I=J,B=K,R=U;return l(),r("div",ee,[t("div",te,[e(a,{size:"large",tag:"b"},{default:n(()=>o[0]||(o[0]=[i("关注动态")])),_:1})]),m.value.length>0?Q((l(),r("div",{key:0,"infinite-scroll-disabled":S.value},[(l(!0),r(N,null,z(m.value,s=>(l(),r("div",ae,[t("div",ne,[t("div",{class:"user",onClick:g=>E(p).push({name:"postList",params:{userId:s.userId}})},[t("div",le,[e(d,{src:s.avatar},null,8,["src"])]),t("div",null,[e(a,{class:"user-name"},{default:n(()=>[i(u(s.nickname),1)]),_:2},1024)])],8,oe),t("div",ie,[e(a,null,{default:n(()=>[i(u(H(s.updatedTime)),1)]),_:2},1024)])]),t("div",{class:"center",onClick:g=>E(p).push(`/post/${s.postId}`)},[t("div",re,[e(C,{class:"tag",color:s.themeColor,effect:"dark",size:"small",hit:""},{default:n(()=>[i(u(s.sectionName),1)]),_:2},1032,["color"]),e(a,{tag:"b",truncated:"",size:"large",class:"post-title"},{default:n(()=>[i(u(s.title),1)]),_:2},1024)]),t("div",de,[e(a,{innerHTML:V(s.content),truncated:!0},null,8,["innerHTML"])]),s.cover!=null?(l(),r("div",ue,[(l(!0),r(N,null,z(JSON.parse(s.cover),g=>(l(),T(w,{style:{width:"120px",height:"120px"},src:g,fit:"cover"},null,8,["src"]))),256))])):h("",!0)],8,ce),t("div",_e,[t("div",null,[e(C,{type:"info",class:"tag"},{default:n(()=>[t("div",me,[e(w,{style:{width:"20px",height:"20px"},src:s.categoryIcon,fit:"fill"},null,8,["src"])]),t("div",null,[e(a,{class:"tag-name",size:"small"},{default:n(()=>[i(u(s.categoryName),1)]),_:2},1024)])]),_:2},1024)]),t("div",ve,[t("div",fe,[e(I,null,{default:n(()=>[e(O)]),_:1}),e(a,{class:"comment-count",type:"info"},{default:n(()=>[i(u(s.commentCount),1)]),_:2},1024)]),t("div",pe,[e(I,null,{default:n(()=>[e(W)]),_:1}),e(a,{class:"like-count",type:"info"},{default:n(()=>[i(u(s.likesCount),1)]),_:2},1024)])])])]))),256)),_.value?(l(),r("div",ge,[e(a,{type:"info"},{default:n(()=>o[1]||(o[1]=[i("正在加载中")])),_:1})])):h("",!0),y.value&&m.value.length>0?(l(),r("div",he,[e(a,{type:"info"},{default:n(()=>o[2]||(o[2]=[i("已经到底了")])),_:1})])):h("",!0)],8,se)),[[R,b]]):(l(),T(B,{key:1,description:"暂时没有帖子"}))])}}}),xe=D(ye,[["__scopeId","data-v-945680ee"]]),ke={class:"follow"},Ce={class:"left"},we={class:"right"},Ie=$({__name:"index",setup(M){return(p,_)=>(l(),r("div",ke,[t("div",Ce,[e(xe)]),t("div",we,[e(Z),e(X,{style:{"margin-top":"20px"}})])]))}}),Ee=D(Ie,[["__scopeId","data-v-358185a1"]]);export{Ee as default};
