import{d as j,f as A,r as f,K as z,aM as $,c as d,a as i,i as s,j as e,M as P,N as D,O as L,G as u,m as v,s as R,o as r,k as l,t as c,l as h,aN as E,S as J,E as Q,aO as W,x as q,q as G,a2 as K,$ as H,a0 as U,_ as X}from"./index-DM1-aU-Q.js";import"./el-infinite-scroll-l0sNRNKZ.js";/* empty css                 */import{S as T}from"./Speaker-XAAnZ56h.js";const Y={class:"system"},Z={class:"title"},ee=["infinite-scroll-disabled"],te={class:"item"},se={key:0,class:"review-item"},ae={class:"avatar"},le={class:"nickname-content-time"},ne={class:"nickname"},oe={key:0,class:"content"},re={class:"time"},ie={key:1,class:"post-action-item"},ce={class:"avatar"},de={class:"nickname-content-time"},_e={class:"nickname"},ue={class:"content"},ve={class:"time"},me={key:2,class:"comment-action-item"},pe={class:"avatar"},fe={class:"nickname-content-time"},ke={class:"nickname"},xe={class:"content"},ye={class:"time"},ge={key:0,class:"loading",style:{display:"flex","justify-content":"center",height:"50px"}},he={key:1,class:"no-more-data",style:{display:"flex","justify-content":"center",height:"50px"}},Ee=j({__name:"System",setup(Te){A(()=>{S()});const m=f(!1),N=z(()=>p.value.current*p.value.pageSize>=C.value),I=z(()=>m.value||N.value),b=()=>{m.value=!0,p.value.current++,S(),m.value=!1},_=f([]),C=f(0),p=f({types:["POST_REVIEW","POST_ACTION","COMMENT_ACTION"],current:1,pageSize:10}),S=async()=>{try{const o=await $(p.value);o.data.data.records.forEach(a=>{a.extra=JSON.parse(a.extra)}),_.value=_.value.concat(o.data.data.records),C.value=o.data.data.total}catch(o){console.error(o)}},k=o=>{J.confirm("确定删除该通知吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{M(o)}).catch(()=>{Q.info("已取消删除")})},M=async o=>{try{(await W(o)).data.code===200&&(_.value=_.value.filter(n=>n.notifyId!==o))}catch(a){console.error(a)}},w=o=>o?JSON.parse(o):"该评论已被删除",B=o=>o||"该文章已被删除";return(o,a)=>{const n=R,x=q,y=G,g=K,F=H,V=U;return r(),d("div",Y,[i("div",Z,[s(n,{size:"large",tag:"b"},{default:e(()=>a[0]||(a[0]=[l(" 系统消息 ")])),_:1})]),_.value.length>0?P((r(),d("div",{key:0,class:"list","infinite-scroll-disabled":I.value},[(r(!0),d(D,null,L(_.value,t=>(r(),d("div",te,[t.type==="POST_REVIEW"?(r(),d("div",se,[i("div",ae,[s(y,{size:46,style:{"background-color":"#409EFF"}},{default:e(()=>[s(x,{style:{"font-size":"24px"}},{default:e(()=>[s(T)]),_:1})]),_:1})]),i("div",le,[i("div",ne,[s(n,{tag:"b"},{default:e(()=>[l(c(t.senderNickname),1)]),_:2},1024),s(n,null,{default:e(()=>[l(" 你的文章【"+c(B(t.title))+"】 ",1)]),_:2},1024),t.extra.result=="approved"?(r(),v(n,{key:0},{default:e(()=>a[1]||(a[1]=[l(" 审核已通过 ")])),_:1})):t.extra.result=="rejected"?(r(),v(n,{key:1},{default:e(()=>a[2]||(a[2]=[l(" 审核不通过 ")])),_:1})):u("",!0)]),t.extra.result=="rejected"?(r(),d("div",oe,[s(n,null,{default:e(()=>[l(" 原因："+c(t.extra.reason),1)]),_:2},1024)])):u("",!0),i("div",re,[s(n,{size:"small",type:"info"},{default:e(()=>[l(c(t.createdTime),1)]),_:2},1024),s(g,{underline:!1,icon:h(E),class:"delete",onClick:O=>k(t.notifyId)},{default:e(()=>a[3]||(a[3]=[l(" 删除该通知 ")])),_:2},1032,["icon","onClick"])])])])):t.type==="POST_ACTION"?(r(),d("div",ie,[i("div",ce,[s(y,{size:46,style:{"background-color":"#409EFF"}},{default:e(()=>[s(x,{style:{"font-size":"24px"}},{default:e(()=>[s(T)]),_:1})]),_:1})]),i("div",de,[i("div",_e,[s(n,{tag:"b"},{default:e(()=>[l(c(t.senderNickname),1)]),_:2},1024),t.extra.result=="take_down"?(r(),v(n,{key:0},{default:e(()=>[l(" 你的文章【"+c(t.title)+"】已被下架 ",1)]),_:2},1024)):t.extra.result=="delete"?(r(),v(n,{key:1},{default:e(()=>[l(" 你的文章【"+c(t.extra.title)+"】 已被删除 ",1)]),_:2},1024)):u("",!0)]),i("div",ue,[s(n,null,{default:e(()=>[l(" 原因："+c(t.extra.reason),1)]),_:2},1024)]),i("div",ve,[s(n,{size:"small",type:"info"},{default:e(()=>[l(c(t.createdTime),1)]),_:2},1024),s(g,{underline:!1,icon:h(E),class:"delete",onClick:O=>k(t.notifyId)},{default:e(()=>a[4]||(a[4]=[l(" 删除该通知 ")])),_:2},1032,["icon","onClick"])])])])):t.type==="COMMENT_ACTION"?(r(),d("div",me,[i("div",pe,[s(y,{size:46,style:{"background-color":"#409EFF"}},{default:e(()=>[s(x,{style:{"font-size":"24px"}},{default:e(()=>[s(T)]),_:1})]),_:1})]),i("div",fe,[i("div",ke,[s(n,{tag:"b"},{default:e(()=>[l(c(t.senderNickname),1)]),_:2},1024),t.extra.result=="delete"?(r(),v(n,{key:0},{default:e(()=>[l(" 你的评论【"+c(w(t.extra.content))+"】已被删除 ",1)]),_:2},1024)):u("",!0)]),i("div",xe,[s(n,null,{default:e(()=>[l(" 原因："+c(t.extra.reason),1)]),_:2},1024)]),i("div",ye,[s(n,{size:"small",type:"info"},{default:e(()=>[l(c(t.createdTime),1)]),_:2},1024),s(g,{underline:!1,icon:h(E),class:"delete",onClick:O=>k(t.notifyId)},{default:e(()=>a[5]||(a[5]=[l(" 删除该通知 ")])),_:2},1032,["icon","onClick"])])])])):u("",!0)]))),256)),m.value?(r(),d("div",ge,[s(n,{type:"info"},{default:e(()=>a[6]||(a[6]=[l("正在加载中")])),_:1})])):u("",!0),N.value&&_.value.length>0?(r(),d("div",he,[s(n,{type:"info"},{default:e(()=>a[7]||(a[7]=[l("已经到底了")])),_:1})])):u("",!0)],8,ee)),[[V,b]]):(r(),v(F,{key:1,description:"暂时没有消息"}))])}}}),ze=X(Ee,[["__scopeId","data-v-5987c4de"]]);export{ze as default};
