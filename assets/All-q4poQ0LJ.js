import{d as q,u as N,b as V,e as T,f as j,w as B,r as h,aH as U,o as n,c as _,a,i as r,j as c,k as i,N as P,O as Q,l as m,t as g,m as I,G as R,n as G,E as x,p as H,s as A,q as O,a2 as D,v as F,_ as M,aI as Z,ad as J,Z as K}from"./index-DM1-aU-Q.js";import{P as W}from"./PostList-CDHRHCzN.js";import{a as X,r as Y}from"./index-SeYphIJa.js";import"./el-infinite-scroll-l0sNRNKZ.js";/* empty css                 */const ee={key:0,class:"user-list"},te={class:"title"},se={class:"content"},oe={class:"item"},ae={class:"left"},ne={class:"center"},re={class:"name"},le={class:"signature"},ce={class:"right"},ie={class:"follow-btn"},de={key:0,class:"loading",style:{display:"flex","justify-content":"center",height:"50px"}},ue={key:1,class:"no-more-data",style:{display:"flex","justify-content":"center",height:"50px"}},_e=q({__name:"UserList",setup(z){const v=N(),y=V(),p=T();j(()=>{$(y.query.keyword)}),B(()=>y.query.keyword,(d,t)=>{S(),$(y.query.keyword)});const u=h([]),f=h(0),k=h({current:1,pageSize:2}),$=async d=>{try{const t=await U(d,k.value);u.value=u.value.concat(t.data.data.records),f.value=t.data.data.total}catch{}},S=()=>{u.value=[],f.value=0,k.value.current=1},L=async d=>{try{const e=(await G(d)).data;e.code==200?(u.value.find(s=>{s.userId==d&&(s.followStatus=1)}),x.success("关注成功")):x.error(e.msg)}catch(t){console.error(t)}},b=async d=>{try{const e=(await H(d)).data;e.code==200?(u.value.find(s=>{s.userId==d&&(s.followStatus=0)}),x.success("取消关注")):x.error(e.msg)}catch(t){console.error(t)}};return(d,t)=>{const e=A,s=O,C=D,w=F;return u.value.length>0?(n(),_("div",ee,[a("div",te,[r(e,{size:"large",tag:"b"},{default:c(()=>t[1]||(t[1]=[i("用户")])),_:1})]),a("div",se,[(n(!0),_(P,null,Q(u.value,l=>(n(),_("div",oe,[a("div",ae,[r(s,{class:"avatar",size:60,src:l.avatar,onClick:o=>m(v).push({name:"postList",params:{userId:l.userId}})},null,8,["src","onClick"])]),a("div",ne,[a("div",re,[r(C,{underline:!1,onClick:o=>m(v).push({name:"postList",params:{userId:l.userId}})},{default:c(()=>[i(g(l.nickname),1)]),_:2},1032,["onClick"])]),a("div",le,[r(e,{type:"info"},{default:c(()=>[i(g(l.fanCount)+"粉丝 · "+g(l.likesCount)+"点赞 · "+g(l.signature),1)]),_:2},1024)])]),a("div",ce,[a("div",ie,[l.followStatus?(n(),I(w,{key:1,type:"default",round:"",style:{width:"80px"},onClick:o=>b(l.userId)},{default:c(()=>t[3]||(t[3]=[i("已关注")])),_:2},1032,["onClick"])):(n(),I(w,{key:0,type:"primary",round:"",style:{width:"80px"},onClick:o=>L(l.userId),disabled:m(p).userInfo.userId==l.userId},{default:c(()=>t[2]||(t[2]=[i("关注")])),_:2},1032,["onClick","disabled"]))])])]))),256)),f.value>k.value.pageSize?(n(),_("div",de,[r(C,{type:"info",underline:!1,onClick:t[0]||(t[0]=l=>m(v).push(`/search/user?keyword=${m(y).query.keyword}`))},{default:c(()=>t[4]||(t[4]=[i("查看全部")])),_:1})])):(n(),_("div",ue,[r(e,{type:"info"},{default:c(()=>t[5]||(t[5]=[i("没有更多了")])),_:1})]))])])):R("",!0)}}}),ye=M(_e,[["__scopeId","data-v-8dadbd10"]]),pe={key:0,class:"category-list"},ve={class:"title"},fe={class:"content"},me={class:"item"},ke={class:"left"},ge={class:"center"},he={class:"category-name"},we={class:"category-description"},$e={class:"right"},Ce={key:0,class:"loading",style:{display:"flex","justify-content":"center",height:"50px"}},xe={key:1,class:"no-more-data",style:{display:"flex","justify-content":"center",height:"50px"}},Ie=q({__name:"CategoryList",setup(z){const v=N(),y=V();j(()=>{k(y.query.keyword)}),B(()=>y.query.keyword,(t,e)=>{$(),k(y.query.keyword)});const p=h([]),u=h(0),f=h({current:1,pageSize:2}),k=async t=>{try{const e=await Z(t,f.value);p.value=p.value.concat(e.data.data.records),u.value=e.data.data.total,console.log(p.value)}catch(e){console.error(e)}},$=()=>{p.value=[],u.value=0,f.value.current=1},S=async t=>{try{(await X(t)).data.code===200&&p.value.forEach(s=>{s.categoryId===t&&(s.preferenceStatus=1)})}catch(e){console.error(e)}},L=async t=>{try{(await Y(t)).data.code===200&&p.value.forEach(s=>{s.categoryId===t&&(s.preferenceStatus=0)})}catch(e){console.error(e)}},b=J(),d=(t,e)=>{b.setCategory(t,e),v.push("/")};return(t,e)=>{const s=A,C=K,w=F,l=D;return p.value.length>0?(n(),_("div",pe,[a("div",ve,[r(s,{size:"large",tag:"b"},{default:c(()=>e[1]||(e[1]=[i("分区")])),_:1})]),a("div",fe,[(n(!0),_(P,null,Q(p.value,o=>(n(),_("div",me,[a("div",ke,[r(C,{class:"cover",style:{width:"80px",height:"80px"},src:o.categoryIcon,fit:"fill",onClick:E=>d(o.categoryId,o.categoryName)},null,8,["src","onClick"])]),a("div",ge,[a("div",he,[r(s,{size:"large",tag:"b",onClick:E=>d(o.categoryId,o.categoryName)},{default:c(()=>[i(g(o.categoryName),1)]),_:2},1032,["onClick"])]),a("div",we,[r(s,{type:"info","line-clamp":"3"},{default:c(()=>[i(g(o.description),1)]),_:2},1024)])]),a("div",$e,[o.preferenceStatus?(n(),I(w,{key:1,round:"",style:{width:"80px"},onClick:E=>L(o.categoryId)},{default:c(()=>e[3]||(e[3]=[i(" 移除偏好 ")])),_:2},1032,["onClick"])):(n(),I(w,{key:0,round:"",style:{width:"80px"},type:"primary",onClick:E=>S(o.categoryId)},{default:c(()=>e[2]||(e[2]=[i(" 添加偏好 ")])),_:2},1032,["onClick"]))])]))),256)),u.value>f.value.pageSize?(n(),_("div",Ce,[r(l,{type:"info",underline:!1,onClick:e[0]||(e[0]=o=>m(v).push(`/search/category?keyword=${m(y).query.keyword}`))},{default:c(()=>e[4]||(e[4]=[i("查看全部")])),_:1})])):(n(),_("div",xe,[r(s,{type:"info"},{default:c(()=>e[5]||(e[5]=[i("没有更多了")])),_:1})]))])])):R("",!0)}}}),Se=M(Ie,[["__scopeId","data-v-a9b55b12"]]),Ne=q({__name:"All",setup(z){return(v,y)=>(n(),_("div",null,[r(ye),r(Se,{style:{"margin-top":"20px"}}),r(W,{style:{"margin-top":"20px"}})]))}});export{Ne as default};
