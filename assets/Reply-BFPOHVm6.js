import{d as O,f as R,r as m,K as C,aM as I,c as r,a as c,i as t,j as l,M as V,N as $,O as j,G as f,m as A,s as D,o as i,k as o,t as d,l as N,aN as M,S as P,E as Q,aO as Y,q,a2 as F,$ as G,a0 as J,_ as K}from"./index-DM1-aU-Q.js";import"./el-infinite-scroll-l0sNRNKZ.js";/* empty css                 */const H={class:"reply"},U={class:"title"},W=["infinite-scroll-disabled"],X={class:"item"},Z={key:0,class:"comment-item"},ee={class:"avatar"},te={class:"nickname-content-time"},se={class:"nickname"},ae={class:"content"},ne={class:"time"},le={key:1,class:"reply-item"},oe={class:"avatar"},ce={class:"nickname-content-time"},ie={class:"nickname"},re={class:"content"},de={class:"time"},ue={key:0,class:"loading",style:{display:"flex","justify-content":"center",height:"50px"}},_e={key:1,class:"no-more-data",style:{display:"flex","justify-content":"center",height:"50px"}},ve=O({__name:"Reply",setup(me){R(()=>{h()});const _=m(!1),y=C(()=>v.value.current*v.value.pageSize>=k.value),T=C(()=>_.value||y.value),b=()=>{_.value=!0,v.value.current++,h(),_.value=!1},u=m([]),k=m(0),v=m({types:["COMMENT","REPLY"],current:1,pageSize:10}),h=async()=>{try{const e=await I(v.value);u.value=u.value.concat(e.data.data.records),k.value=e.data.data.total}catch(e){console.error(e)}},g=e=>{P.confirm("确定删除该通知吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{z(e)}).catch(()=>{Q.info("已取消删除")})},z=async e=>{try{(await Y(e)).data.code===200&&(u.value=u.value.filter(n=>n.notifyId!==e))}catch(a){console.error(a)}},p=e=>e?JSON.parse(e):"该评论已被删除",B=e=>e||"该文章已被删除";return(e,a)=>{const n=D,x=q,E=F,S=G,w=J;return i(),r("div",H,[c("div",U,[t(n,{size:"large",tag:"b"},{default:l(()=>a[0]||(a[0]=[o(" 回复我的 ")])),_:1})]),u.value.length>0?V((i(),r("div",{key:0,class:"list","infinite-scroll-disabled":T.value},[(i(!0),r($,null,j(u.value,s=>(i(),r("div",X,[s.type==="COMMENT"?(i(),r("div",Z,[c("div",ee,[t(x,{size:46,src:s.senderAvatar},null,8,["src"])]),c("div",te,[c("div",se,[t(n,{tag:"b"},{default:l(()=>[o(d(s.senderNickname),1)]),_:2},1024),t(n,null,{default:l(()=>[o(" 评论了我的文章【"+d(B(s.title))+"】： ",1)]),_:2},1024)]),c("div",ae,[t(n,null,{default:l(()=>[o(d(p(s.content)),1)]),_:2},1024)]),c("div",ne,[t(n,{size:"small",type:"info"},{default:l(()=>[o(d(s.createdTime),1)]),_:2},1024),t(E,{underline:!1,icon:N(M),class:"delete",onClick:L=>g(s.notifyId)},{default:l(()=>a[1]||(a[1]=[o(" 删除该通知 ")])),_:2},1032,["icon","onClick"])])])])):s.type==="REPLY"?(i(),r("div",le,[c("div",oe,[t(x,{size:46,src:s.senderAvatar},null,8,["src"])]),c("div",ce,[c("div",ie,[t(n,{tag:"b"},{default:l(()=>[o(d(s.senderNickname),1)]),_:2},1024),t(n,null,{default:l(()=>[o(" 回复了我的评论【"+d(p(s.replyContent))+"】： ",1)]),_:2},1024)]),c("div",re,[t(n,null,{default:l(()=>[o(d(p(s.content)),1)]),_:2},1024)]),c("div",de,[t(n,{size:"small",type:"info"},{default:l(()=>[o(d(s.createdTime),1)]),_:2},1024),t(E,{underline:!1,icon:N(M),class:"delete",onClick:L=>g(s.notifyId)},{default:l(()=>a[2]||(a[2]=[o(" 删除该通知 ")])),_:2},1032,["icon","onClick"])])])])):f("",!0)]))),256)),_.value?(i(),r("div",ue,[t(n,{type:"info"},{default:l(()=>a[3]||(a[3]=[o("正在加载中")])),_:1})])):f("",!0),y.value&&u.value.length>0?(i(),r("div",_e,[t(n,{type:"info"},{default:l(()=>a[4]||(a[4]=[o("已经到底了")])),_:1})])):f("",!0)],8,W)),[[w,b]]):(i(),A(S,{key:1,description:"暂时没有收到回复"}))])}}}),ke=K(ve,[["__scopeId","data-v-5452c6b2"]]);export{ke as default};
