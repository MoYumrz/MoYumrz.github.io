import{d as $,u as j,b as F,f as H,w as P,r as g,K as N,aJ as Q,o as l,c as r,a as s,i as t,j as o,k as i,M as J,N as z,O as E,l as T,t as u,m as b,G as k,Q as O,R as W,s as Y,q as A,V as G,Z as K,x as Z,$ as U,a0 as X,_ as ee}from"./index-DM1-aU-Q.js";import"./el-infinite-scroll-l0sNRNKZ.js";/* empty css                 */const te={class:"post-list"},se={class:"title"},ae=["infinite-scroll-disabled"],ne={class:"item"},oe={class:"top"},le=["onClick"],ie={class:"user-avatar"},ce={class:"time"},re=["onClick"],de={class:"tag-title"},ue={class:"content"},_e={key:0,class:"covers"},me={class:"bottom"},ve={style:{"margin-right":"5px"}},fe={class:"comment-like"},ge={class:"comment"},pe={class:"like"},he={key:0,class:"loading",style:{display:"flex","justify-content":"center",height:"50px"}},ye={key:1,class:"no-more-data",style:{display:"flex","justify-content":"center",height:"50px"}},ke=$({__name:"PostList",setup(xe){const x=j(),v=F();H(()=>{h(v.query.keyword)}),P(()=>v.query.keyword,(d,e)=>{S(),h(v.query.keyword)});const f=g(!1),C=N(()=>m.value.current*m.value.pageSize>=p.value),D=N(()=>f.value||C.value),M=()=>{f.value=!0,m.value.current++,h(v.query.keyword),f.value=!1},_=g([]),p=g(0),m=g({current:1,pageSize:10}),h=async d=>{try{const e=await Q(d,m.value);e.data.data&&(_.value=_.value.concat(e.data.data.records),p.value=e.data.data.total)}catch(e){console.error(e)}},S=()=>{_.value=[],p.value=0,m.value.current=1},V=d=>{const e=new Date(d),n=new Date,c=n.getTime()-e.getTime();return c<6e4?"刚刚":c<36e5?Math.floor(c/6e4)+"分钟前":c<864e5?Math.floor(c/36e5)+"小时前":c<1728e5?"昨天 ":n.getFullYear()===e.getFullYear()?e.toLocaleDateString("zh-CN",{month:"2-digit",day:"2-digit"}).replace(/\//g,"-").replace("，",""):e.toLocaleDateString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit"}).replace(/\//g,"-")},R=d=>d.replace(/<img[^>]*>/g,"[图片]").replace(/<[^>]*>/g,"");return(d,e)=>{const n=Y,c=A,w=G,L=K,I=Z,q=U,B=X;return l(),r("div",te,[s("div",se,[t(n,{size:"large",tag:"b"},{default:o(()=>e[0]||(e[0]=[i("帖子")])),_:1})]),_.value.length>0?J((l(),r("div",{key:0,"infinite-scroll-disabled":D.value},[(l(!0),r(z,null,E(_.value,a=>(l(),r("div",ne,[s("div",oe,[s("div",{class:"user",onClick:y=>T(x).push({name:"postList",params:{userId:a.userId}})},[s("div",ie,[t(c,{src:a.avatar},null,8,["src"])]),s("div",null,[t(n,{class:"user-name"},{default:o(()=>[i(u(a.nickname),1)]),_:2},1024)])],8,le),s("div",ce,[t(n,null,{default:o(()=>[i(u(V(a.updatedTime)),1)]),_:2},1024)])]),s("div",{class:"center",onClick:y=>T(x).push(`/post/${a.postId}`)},[s("div",de,[t(w,{class:"tag",color:a.themeColor,effect:"dark",size:"small",hit:""},{default:o(()=>[i(u(a.sectionName),1)]),_:2},1032,["color"]),t(n,{tag:"b",truncated:"",size:"large",class:"post-title"},{default:o(()=>[i(u(a.title),1)]),_:2},1024)]),s("div",ue,[t(n,{innerHTML:R(a.content),truncated:!0},null,8,["innerHTML"])]),a.cover!=null?(l(),r("div",_e,[(l(!0),r(z,null,E(JSON.parse(a.cover),y=>(l(),b(L,{style:{width:"120px",height:"120px"},src:y,fit:"cover"},null,8,["src"]))),256))])):k("",!0)],8,re),s("div",me,[s("div",null,[t(w,{type:"info",class:"tag"},{default:o(()=>[s("div",ve,[t(L,{style:{width:"20px",height:"20px"},src:a.categoryIcon,fit:"fill"},null,8,["src"])]),s("div",null,[t(n,{class:"tag-name",size:"small"},{default:o(()=>[i(u(a.categoryName),1)]),_:2},1024)])]),_:2},1024)]),s("div",fe,[s("div",ge,[t(I,null,{default:o(()=>[t(O)]),_:1}),t(n,{class:"comment-count",type:"info"},{default:o(()=>[i(u(a.commentCount),1)]),_:2},1024)]),s("div",pe,[t(I,null,{default:o(()=>[t(W)]),_:1}),t(n,{class:"like-count",type:"info"},{default:o(()=>[i(u(a.likesCount),1)]),_:2},1024)])])])]))),256)),f.value?(l(),r("div",he,[t(n,{type:"info"},{default:o(()=>e[1]||(e[1]=[i("正在加载中")])),_:1})])):k("",!0),C.value&&_.value.length>0?(l(),r("div",ye,[t(n,{type:"info"},{default:o(()=>e[2]||(e[2]=[i("已经到底了")])),_:1})])):k("",!0)],8,ae)),[[B,M]]):(l(),b(q,{key:1,description:"搜索不到您要的结果，换个关键词试试呗~"}))])}}}),Ie=ee(ke,[["__scopeId","data-v-951961f9"]]);export{Ie as P};
