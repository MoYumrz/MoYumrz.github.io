import{d as j,e as D,f as A,w as R,r as f,K as B,a1 as T,c as l,a as d,i as u,j as c,M as U,N as q,O as G,G as I,m as x,b as K,u as O,s as Q,o,k as i,t as w,l as _,n as H,E as m,p as J,q as P,a2 as W,v as X,$ as Y,a0 as Z,_ as ee}from"./index-DM1-aU-Q.js";import"./el-infinite-scroll-l0sNRNKZ.js";/* empty css                 */const se={class:"fan-list"},te={class:"title"},ae=["infinite-scroll-disabled"],oe={class:"item"},ne={class:"left"},re={class:"center"},le={class:"name"},ce={key:0,class:"signature"},ie={class:"right"},de={class:"follow-btn"},ue={key:0,class:"loading",style:{display:"flex","justify-content":"center",height:"50px"}},_e={key:1,class:"no-more-data",style:{display:"flex","justify-content":"center",height:"50px"}},pe=j({__name:"FanList",setup(ve){const y=K(),b=O(),h=D();A(()=>{g()}),R(()=>y.params.userId,()=>{n.value=[],g()});const p=f(!1),C=B(()=>v.value.current*v.value.pageSize>=E.value),F=B(()=>p.value||C.value),N=()=>{p.value=!0,v.value.current++,g(),p.value=!1},n=f([]),E=f(0),v=f({current:1,pageSize:10,searchUserId:h.userInfo.userId}),g=async()=>{try{const s=await T(Number(y.params.userId),v.value);n.value=n.value.concat(s.data.data.records),E.value=s.data.data.total}catch(s){console.error(s)}},S=async s=>{try{const t=(await H(s)).data;t.code==200?(n.value.find(r=>{r.userId==s&&(r.status=1)}),m.success("关注成功")):m.error(t.msg)}catch(e){console.error(e)}},$=async s=>{try{const t=(await J(s)).data;t.code==200?(n.value.find(r=>{r.userId==s&&(r.status=0)}),m.success("取消关注")):m.error(t.msg)}catch(e){console.error(e)}};return(s,e)=>{const t=Q,r=P,z=W,L=X,M=Y,V=Z;return o(),l("div",se,[d("div",te,[u(t,{size:"large",tag:"b"},{default:c(()=>[i(w(_(h).userInfo.userId==_(y).params.userId?"我的粉丝":"粉丝"),1)]),_:1})]),n.value.length>0?U((o(),l("div",{key:0,class:"content","infinite-scroll-disabled":F.value},[(o(!0),l(q,null,G(n.value,a=>(o(),l("div",oe,[d("div",ne,[u(r,{class:"avatar",size:60,src:a.avatar,onClick:k=>_(b).push({name:"postList",params:{userId:a.userId}})},null,8,["src","onClick"])]),d("div",re,[d("div",le,[u(z,{underline:!1,onClick:k=>_(b).push({name:"postList",params:{userId:a.userId}})},{default:c(()=>[i(w(a.nickname),1)]),_:2},1032,["onClick"])]),a.signature!=null?(o(),l("div",ce,[u(t,{type:"info"},{default:c(()=>[i(w(a.signature),1)]),_:2},1024)])):I("",!0)]),d("div",ie,[d("div",de,[a.status?(o(),x(L,{key:1,type:"default",round:"",style:{width:"80px"},onClick:k=>$(a.userId)},{default:c(()=>e[1]||(e[1]=[i("已关注")])),_:2},1032,["onClick"])):(o(),x(L,{key:0,type:"primary",round:"",style:{width:"80px"},onClick:k=>S(a.userId),disabled:_(h).userInfo.userId==a.userId},{default:c(()=>e[0]||(e[0]=[i("关注")])),_:2},1032,["onClick","disabled"]))])])]))),256)),p.value?(o(),l("div",ue,[u(t,{type:"info"},{default:c(()=>e[2]||(e[2]=[i("正在加载中")])),_:1})])):I("",!0),C.value&&n.value.length>0?(o(),l("div",_e,[u(t,{type:"info"},{default:c(()=>e[3]||(e[3]=[i("已经到底了")])),_:1})])):I("",!0)],8,ae)),[[V,N]]):(o(),x(M,{key:1,description:"很抱歉你没有吸引到粉丝~"}))])}}}),he=ee(pe,[["__scopeId","data-v-5dbea570"]]);export{he as default};
