import{d as j,e as A,f as D,w as R,r as f,K as S,a3 as T,c as r,a as i,i as u,j as c,M as U,N as q,O as G,G as I,m as w,b as K,u as O,s as Q,o,k as d,t as x,l as _,n as H,E as m,p as J,q as P,a2 as W,v as X,$ as Y,a0 as Z,_ as ee}from"./index-DM1-aU-Q.js";import"./el-infinite-scroll-l0sNRNKZ.js";/* empty css                 */const te={class:"follow-list"},se={class:"title"},ae=["infinite-scroll-disabled"],oe={class:"item"},ne={class:"left"},le={class:"center"},re={class:"name"},ce={key:0,class:"signature"},de={class:"right"},ie={class:"follow-btn"},ue={key:0,class:"loading",style:{display:"flex","justify-content":"center",height:"50px"}},_e={key:1,class:"no-more-data",style:{display:"flex","justify-content":"center",height:"50px"}},pe=j({__name:"FollowList",setup(ve){const y=K(),b=O(),h=A();D(()=>{g()}),R(()=>y.params.userId,()=>{n.value=[],g()});const p=f(!1),C=S(()=>v.value.current*v.value.pageSize>=E.value),N=S(()=>p.value||C.value),B=()=>{p.value=!0,v.value.current++,g(),p.value=!1},n=f([]),E=f(0),v=f({current:1,pageSize:10,searchUserId:h.userInfo.userId}),g=async()=>{try{const t=await T(Number(y.params.userId),v.value);n.value=n.value.concat(t.data.data.records),E.value=t.data.data.total}catch(t){console.error(t)}},F=async t=>{try{const s=(await H(t)).data;s.code==200?(n.value.find(l=>{l.followedId==t&&(l.status=1)}),m.success("关注成功")):m.error(s.msg)}catch(e){console.error(e)}},$=async t=>{try{const s=(await J(t)).data;s.code==200?(n.value.find(l=>{l.followedId==t&&(l.status=0)}),m.success("取消关注")):m.error(s.msg)}catch(e){console.error(e)}};return(t,e)=>{const s=Q,l=P,z=W,L=X,M=Y,V=Z;return o(),r("div",te,[i("div",se,[u(s,{size:"large",tag:"b"},{default:c(()=>[d(x(_(h).userInfo.userId==_(y).params.userId?"我的关注":"关注"),1)]),_:1})]),n.value.length>0?U((o(),r("div",{key:0,class:"content","infinite-scroll-disabled":N.value},[(o(!0),r(q,null,G(n.value,a=>(o(),r("div",oe,[i("div",ne,[u(l,{class:"avatar",size:60,src:a.followedAvatar,onClick:k=>_(b).push({name:"postList",params:{userId:a.followedId}})},null,8,["src","onClick"])]),i("div",le,[i("div",re,[u(z,{underline:!1,onClick:k=>_(b).push({name:"postList",params:{userId:a.followedId}})},{default:c(()=>[d(x(a.followedNickname),1)]),_:2},1032,["onClick"])]),a.followedSignature!=null?(o(),r("div",ce,[u(s,{type:"info"},{default:c(()=>[d(x(a.followedSignature),1)]),_:2},1024)])):I("",!0)]),i("div",de,[i("div",ie,[a.status?(o(),w(L,{key:1,type:"default",round:"",style:{width:"80px"},onClick:k=>$(a.followedId)},{default:c(()=>e[1]||(e[1]=[d("已关注")])),_:2},1032,["onClick"])):(o(),w(L,{key:0,type:"primary",round:"",style:{width:"80px"},onClick:k=>F(a.followedId),disabled:_(h).userInfo.userId==a.followedId},{default:c(()=>e[0]||(e[0]=[d("关注")])),_:2},1032,["onClick","disabled"]))])])]))),256)),p.value?(o(),r("div",ue,[u(s,{type:"info"},{default:c(()=>e[2]||(e[2]=[d("正在加载中")])),_:1})])):I("",!0),C.value&&n.value.length>0?(o(),r("div",_e,[u(s,{type:"info"},{default:c(()=>e[3]||(e[3]=[d("已经到底了")])),_:1})])):I("",!0)],8,ae)),[[V,B]]):(o(),w(M,{key:1,description:"去关注更多的用户吧"}))])}}}),he=ee(pe,[["__scopeId","data-v-9bc71d7c"]]);export{he as default};
