import{d as D,e as F,f as R,w as A,r as p,K as E,aH as Q,c as d,a as r,i as u,j as c,M as T,N as U,O as G,G as S,m as w,u as H,b as K,s as O,o,k as i,l as x,t as y,n as J,E as m,p as P,q as W,a2 as X,v as Y,$ as Z,a0 as ee,_ as te}from"./index-DM1-aU-Q.js";import"./el-infinite-scroll-l0sNRNKZ.js";/* empty css                 */const se={class:"user-list"},ae={class:"title"},oe=["infinite-scroll-disabled"],ne={class:"item"},le={class:"left"},re={class:"center"},ce={class:"name"},ie={class:"signature"},de={class:"right"},ue={class:"follow-btn"},_e={key:0,class:"loading",style:{display:"flex","justify-content":"center",height:"50px"}},ve={key:1,class:"no-more-data",style:{display:"flex","justify-content":"center",height:"50px"}},fe=D({__name:"User",setup(pe){const C=H(),v=K(),L=F();R(()=>{h(v.query.keyword)}),A(()=>v.query.keyword,(a,e)=>{B(),h(v.query.keyword)});const f=p(!1),I=E(()=>_.value.current*_.value.pageSize>=k.value),V=E(()=>f.value||I.value),q=()=>{f.value=!0,_.value.current++,h(v.query.keyword),f.value=!1},n=p([]),k=p(0),_=p({current:1,pageSize:10}),h=async a=>{try{const e=await Q(a,_.value);n.value=n.value.concat(e.data.data.records),k.value=e.data.data.total}catch{}},B=()=>{n.value=[],k.value=0,_.value.current=1},N=async a=>{try{const s=(await J(a)).data;s.code==200?(n.value.find(l=>{l.userId==a&&(l.followStatus=1)}),m.success("关注成功")):m.error(s.msg)}catch(e){console.error(e)}},$=async a=>{try{const s=(await P(a)).data;s.code==200?(n.value.find(l=>{l.userId==a&&(l.followStatus=0)}),m.success("取消关注")):m.error(s.msg)}catch(e){console.error(e)}};return(a,e)=>{const s=O,l=W,z=X,b=Y,M=Z,j=ee;return o(),d("div",se,[r("div",ae,[u(s,{size:"large",tag:"b"},{default:c(()=>e[0]||(e[0]=[i("用户")])),_:1})]),n.value.length>0?T((o(),d("div",{key:0,class:"content","infinite-scroll-disabled":V.value},[(o(!0),d(U,null,G(n.value,t=>(o(),d("div",ne,[r("div",le,[u(l,{class:"avatar",size:60,src:t.avatar,onClick:g=>x(C).push({name:"postList",params:{userId:t.userId}})},null,8,["src","onClick"])]),r("div",re,[r("div",ce,[u(z,{underline:!1,onClick:g=>x(C).push({name:"postList",params:{userId:t.userId}})},{default:c(()=>[i(y(t.nickname),1)]),_:2},1032,["onClick"])]),r("div",ie,[u(s,{type:"info"},{default:c(()=>[i(y(t.fanCount)+"粉丝 · "+y(t.likesCount)+"点赞 · "+y(t.signature),1)]),_:2},1024)])]),r("div",de,[r("div",ue,[t.followStatus?(o(),w(b,{key:1,type:"default",round:"",style:{width:"80px"},onClick:g=>$(t.userId)},{default:c(()=>e[2]||(e[2]=[i("已关注")])),_:2},1032,["onClick"])):(o(),w(b,{key:0,type:"primary",round:"",style:{width:"80px"},onClick:g=>N(t.userId),disabled:x(L).userInfo.userId==t.userId},{default:c(()=>e[1]||(e[1]=[i("关注")])),_:2},1032,["onClick","disabled"]))])])]))),256)),f.value?(o(),d("div",_e,[u(s,{type:"info"},{default:c(()=>e[3]||(e[3]=[i("正在加载中")])),_:1})])):S("",!0),I.value&&n.value.length>0?(o(),d("div",ve,[u(s,{type:"info"},{default:c(()=>e[4]||(e[4]=[i("已经到底了")])),_:1})])):S("",!0)],8,oe)),[[j,q]]):(o(),w(M,{key:1,description:"搜索不到您要的结果，换个关键词试试呗~"}))])}}}),he=te(fe,[["__scopeId","data-v-ff30bae3"]]);export{he as default};
