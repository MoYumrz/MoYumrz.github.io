import{d as D,f as L,w as M,r as p,K as x,aI as P,ad as R,c,a as i,i as d,j as n,M as Q,N as T,O as F,G as C,m as g,u as G,b as K,s as O,o as r,k as l,t as E,Z,v as A,$ as H,a0 as J,_ as U}from"./index-DM1-aU-Q.js";import"./el-infinite-scroll-l0sNRNKZ.js";/* empty css                 */import{a as W,r as X}from"./index-SeYphIJa.js";const Y={class:"category-list"},ee={class:"title"},te=["infinite-scroll-disabled"],se={class:"item"},oe={class:"left"},ae={class:"center"},re={class:"category-name"},ne={class:"category-description"},le={class:"right"},ce={key:0,class:"loading",style:{display:"flex","justify-content":"center",height:"50px"}},ie={key:1,class:"no-more-data",style:{display:"flex","justify-content":"center",height:"50px"}},de=D({__name:"Category",setup(ue){const I=G(),y=K();L(()=>{f(y.query.keyword)}),M(()=>y.query.keyword,(t,e)=>{N(),f(y.query.keyword)});const _=p(!1),h=x(()=>u.value.current*u.value.pageSize>=v.value),S=x(()=>_.value||h.value),b=()=>{_.value=!0,u.value.current++,f(y.query.keyword),_.value=!1},a=p([]),v=p(0),u=p({current:1,pageSize:10}),f=async t=>{try{const e=await P(t,u.value);a.value=a.value.concat(e.data.data.records),v.value=e.data.data.total,console.log(a.value)}catch(e){console.error(e)}},N=()=>{a.value=[],v.value=0,u.value.current=1},V=async t=>{try{(await W(t)).data.code===200&&a.value.forEach(s=>{s.categoryId===t&&(s.preferenceStatus=1)})}catch(e){console.error(e)}},B=async t=>{try{(await X(t)).data.code===200&&a.value.forEach(s=>{s.categoryId===t&&(s.preferenceStatus=0)})}catch(e){console.error(e)}},$=R(),k=(t,e)=>{$.setCategory(t,e),I.push("/")};return(t,e)=>{const s=O,q=Z,w=A,z=H,j=J;return r(),c("div",Y,[i("div",ee,[d(s,{size:"large",tag:"b"},{default:n(()=>e[0]||(e[0]=[l("分区")])),_:1})]),a.value.length>0?Q((r(),c("div",{key:0,class:"content","infinite-scroll-disabled":S.value},[(r(!0),c(T,null,F(a.value,o=>(r(),c("div",se,[i("div",oe,[d(q,{class:"cover",style:{width:"80px",height:"80px"},src:o.categoryIcon,fit:"fill",onClick:m=>k(o.categoryId,o.categoryName)},null,8,["src","onClick"])]),i("div",ae,[i("div",re,[d(s,{size:"large",tag:"b",onClick:m=>k(o.categoryId,o.categoryName)},{default:n(()=>[l(E(o.categoryName),1)]),_:2},1032,["onClick"])]),i("div",ne,[d(s,{type:"info","line-clamp":"3"},{default:n(()=>[l(E(o.description),1)]),_:2},1024)])]),i("div",le,[o.preferenceStatus?(r(),g(w,{key:1,round:"",style:{width:"80px"},onClick:m=>B(o.categoryId)},{default:n(()=>e[2]||(e[2]=[l(" 移除偏好 ")])),_:2},1032,["onClick"])):(r(),g(w,{key:0,round:"",style:{width:"80px"},type:"primary",onClick:m=>V(o.categoryId)},{default:n(()=>e[1]||(e[1]=[l(" 添加偏好 ")])),_:2},1032,["onClick"]))])]))),256)),_.value?(r(),c("div",ce,[d(s,{type:"info"},{default:n(()=>e[3]||(e[3]=[l("正在加载中")])),_:1})])):C("",!0),h.value&&a.value.length>0?(r(),c("div",ie,[d(s,{type:"info"},{default:n(()=>e[4]||(e[4]=[l("已经到底了")])),_:1})])):C("",!0)],8,te)),[[j,b]]):(r(),g(z,{key:1,description:"搜索不到您要的结果，换个关键词试试呗~"}))])}}}),fe=U(de,[["__scopeId","data-v-9bf6f430"]]);export{fe as default};
